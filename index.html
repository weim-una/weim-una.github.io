<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no"
  />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>千束町 歯のクリニック ガイダンス</title>
  <style>
    :root{
      --bg-grad: linear-gradient(135deg, #FFE5E5 0%, #FFF0F5 50%, #E8F5FF 100%);
      --pink: #FFB6C1;
      --pink-2:#FFD4E5;
      --hot:#FF69B4;
      --violet:#E0BBE4;
      --text:#4A4A4A;
      --accent:#D87093;
      
      /* iPhone画面サイズ変数 */
      --iphone-se: 375px;
      --iphone-std: 390px;
      --iphone-plus: 428px;
      --safe-top: env(safe-area-inset-top, 20px);
      --safe-bottom: env(safe-area-inset-bottom, 34px);
    }

    *{ 
      box-sizing: border-box; 
      -webkit-tap-highlight-color: transparent;
    }

    html, body{
      height: 100%;
      overflow-x: hidden;
    }

    body{
      margin: 0;
      -webkit-text-size-adjust: 100%;
      -webkit-font-smoothing: antialiased;
      font-family: 'Hiragino Sans','Hiragino Kaku Gothic ProN','Noto Sans JP', system-ui, -apple-system, sans-serif;
      background: var(--bg-grad);
      background-attachment: fixed;
      display: flex;
      justify-content: center;
      padding: var(--safe-top) 12px calc(var(--safe-bottom) + 75px) 12px;
      color: var(--text);
      min-height: 100vh;
      min-height: 100dvh;
      line-height: 1.6;
      overscroll-behavior: none;
    }

    .container{
      width: 100%;
      max-width: min(100vw - 24px, 420px);
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(255,182,193,0.25);
      overflow: hidden;
      position: relative;
    }

    /* スライド共通：iPhone向け最適化 */
    .slide{
      display: none;
      padding: 16px 20px 24px;
      animation: slideIn .3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      min-height: calc(100vh - var(--safe-top) - var(--safe-bottom) - 75px - 24px);
      position: relative;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }
    
    .slide.active{ 
      display: block; 
    }

    @keyframes slideIn{
      from{ opacity: 0; transform: translateX(20px); }
      to{ opacity: 1; transform: translateX(0); }
    }
    
    @media (prefers-reduced-motion: reduce){
      .slide{ animation: none; }
    }

    /* iPhone SE (375px) 対応 */
    @media (max-width: 375px) {
      .container{
        max-width: calc(100vw - 16px);
        border-radius: 16px;
      }
      .slide{
        padding: 14px 16px 20px;
      }
    }

    /* iPhone 14 Pro Max (428px) 対応 */
    @media (min-width: 428px) {
      .slide{
        padding: 20px 24px 28px;
      }
    }

    /* カバー */
    .slide-cover{
      background: linear-gradient(135deg, #FFB6C1 0%, #FFE4E1 50%, #E0BBE4 100%);
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 16px;
      align-items: center;
    }
    
    .slide-cover h1{
      font-size: clamp(24px, 7vw, 40px);
      margin: 0;
      font-weight: 800;
      color: var(--hot);
      letter-spacing: .02em;
      line-height: 1.2;
    }
    
    .slide-cover .tagline{
      font-size: clamp(16px, 5vw, 24px);
      font-weight: 700;
      background: rgba(255,255,255,.85);
      padding: 12px 20px;
      border-radius: 25px;
      color: var(--accent);
      display: inline-block;
      box-shadow: 0 4px 12px rgba(255,182,193,.2);
    }
    
    .slide-cover .greeting{
      font-size: clamp(15px, 4.5vw, 18px);
      margin: 8px 0 0;
      color: #fff;
      font-weight: 600;
    }

    /* 見出し・本文：iPhone向けサイズ調整 */
    h2{
      font-size: clamp(20px, 6vw, 28px);
      color: var(--pink);
      margin: 0 0 16px;
      border-bottom: 3px solid var(--pink-2);
      padding-bottom: 8px;
      letter-spacing: .01em;
      font-weight: 700;
    }
    
    h3{
      font-size: clamp(17px, 5vw, 22px);
      color: var(--violet);
      margin: 16px 0 8px;
      font-weight: 600;
    }
    
    .content{
      font-size: clamp(15px, 4.2vw, 17px);
      line-height: 1.65;
    }

    .highlight{
      background: linear-gradient(transparent 65%, #FFDAB9 65%);
      font-weight: 700;
      padding: 0 3px;
      color: var(--accent);
      border-radius: 2px;
    }

    /* 箇条書き：タッチ操作向け調整 */
    .bullet-list{
      list-style: none;
      margin: 16px 0;
      padding: 0;
      display: grid;
      gap: 12px;
    }
    
    .bullet-list li{
      position: relative;
      padding-left: 32px;
      font-size: clamp(14px, 4vw, 16px);
      line-height: 1.6;
    }
    
    .bullet-list li::before{
      content: "✓";
      position: absolute;
      left: 0; 
      top: 2px;
      color: var(--pink);
      font-weight: 800;
      font-size: 1.2em;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .info-box{
      background: linear-gradient(135deg, #FFF5F7 0%, #F8E8EE 100%);
      padding: 16px 18px;
      border-radius: 14px;
      margin-top: 16px;
      border-left: 4px solid var(--pink);
      box-shadow: 0 4px 12px rgba(255,182,193,.15);
      font-size: clamp(14px, 4vw, 16px);
    }

    /* グリッド：iPhone向け1列レイアウト */
    .feature-grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 16px;
    }
    
    /* iPhone Plus以上で2列 */
    @media (min-width: 414px) and (orientation: portrait){
      .feature-grid{ 
        grid-template-columns: repeat(2, 1fr); 
        gap: 10px;
      }
    }

    .feature-card{
      background: linear-gradient(135deg, #FFF9FB 0%, #FFE8F0 100%);
      border: 2px solid var(--pink-2);
      padding: 14px 16px;
      border-radius: 12px;
      box-shadow: 0 3px 10px rgba(255,182,193,.12);
      transition: transform .2s ease;
      min-height: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .feature-card:active{ 
      transform: scale(.98); 
    }
    
    .feature-card h4{
      color: var(--hot);
      font-size: clamp(15px, 4.5vw, 18px);
      margin: 0 0 4px;
      font-weight: 600;
    }
    
    .feature-card p{
      margin: 0;
      font-size: clamp(13px, 3.8vw, 15px);
      color: var(--text);
    }

    .qa-item{
      background: linear-gradient(135deg, #FFF9FB 0%, #FFE8F0 100%);
      padding: 16px 18px;
      border-radius: 12px;
      margin: 12px 0;
      border-left: 4px solid var(--pink);
      box-shadow: 0 3px 8px rgba(255,182,193,.12);
      font-size: clamp(14px, 4vw, 16px);
    }
    
    .qa-item strong{
      color: var(--hot);
      font-size: 1em;
      display: block;
      margin-bottom: 6px;
    }

    .special-box{
      background: linear-gradient(135deg, var(--pink) 0%, var(--pink-2) 100%);
      color: #fff;
      text-align: center;
      font-size: clamp(15px, 4.5vw, 18px);
      margin-top: 20px;
      padding: 18px 20px;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(255,182,193,.3);
      font-weight: 600;
    }

    .contact-box{
      background: linear-gradient(135deg, var(--pink) 0%, var(--violet) 100%);
      color: #fff;
      padding: 20px 24px;
      border-radius: 16px;
      text-align: center;
      margin: 20px 0;
      box-shadow: 0 8px 24px rgba(255,182,193,.3);
    }
    
    .contact-box h3{
      color: #fff;
      font-size: clamp(20px, 5.5vw, 26px);
      margin: 0 0 12px;
      font-weight: 700;
    }
    
    .contact-box p{
      font-size: clamp(15px, 4.5vw, 18px);
      margin: 8px 0;
      line-height: 1.4;
    }

    .emoji{ 
      font-size: 1.3em; 
      margin-right: 8px; 
      display: inline-block;
    }

    /* ナビ：iPhone向け最適化 */
    .navigation{
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: min(100vw - 24px, 420px);
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      gap: 12px;
      padding: 12px 16px calc(12px + var(--safe-bottom));
      background: linear-gradient(135deg, #FFF5F7 0%, #FFE8F0 100%);
      border-top: 2px solid var(--pink-2);
      border-radius: 20px 20px 0 0;
      box-shadow: 0 -4px 16px rgba(255,182,193,.2);
      z-index: 100;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    /* iPhone SE向けナビ調整 */
    @media (max-width: 375px){
      .navigation{
        width: calc(100vw - 16px);
        padding: 10px 14px calc(10px + var(--safe-bottom));
        gap: 8px;
      }
    }
    
    .nav-btn{
      background: linear-gradient(135deg, var(--pink) 0%, var(--pink-2) 100%);
      color: #fff;
      border: none;
      padding: 14px 20px;
      border-radius: 25px;
      cursor: pointer;
      font-size: clamp(15px, 4.2vw, 16px);
      font-weight: 700;
      transition: all .2s ease;
      box-shadow: 0 4px 12px rgba(255,182,193,.25);
      min-height: 48px;
      min-width: 80px;
      touch-action: manipulation;
      user-select: none;
      -webkit-user-select: none;
    }
    
    .nav-btn:active{ 
      transform: scale(.95); 
      box-shadow: 0 2px 8px rgba(255,182,193,.3);
    }
    
    .nav-btn:disabled{ 
      opacity: .4; 
      cursor: not-allowed; 
      transform: none;
    }
    
    .slide-counter{
      text-align: center;
      font-size: clamp(13px, 3.8vw, 14px);
      color: var(--accent);
      font-weight: 700;
      min-width: 60px;
      padding: 8px 12px;
      background: rgba(255,255,255,.8);
      border-radius: 20px;
      border: 1px solid var(--pink-2);
    }

    /* 横向き対応 */
    @media (orientation: landscape) and (max-height: 500px){
      body{ 
        padding: 8px 12px calc(var(--safe-bottom) + 65px) 12px; 
      }
      .slide{
        min-height: calc(100vh - var(--safe-bottom) - 65px - 16px);
        padding: 12px 20px 16px;
      }
      .navigation{ 
        padding: 8px 16px calc(8px + var(--safe-bottom));
      }
      h2{ font-size: clamp(18px, 5.5vw, 24px); }
      .slide-cover h1{ font-size: clamp(22px, 6.5vw, 32px); }
    }

    /* iPhone 14 Pro/Pro Max のDynamic Island対応 */
    @media (min-width: 393px) {
      :root{
        --safe-top: max(env(safe-area-inset-top, 20px), 47px);
      }
    }

    /* スクロールバー非表示（Safari向け） */
    .slide::-webkit-scrollbar{
      display: none;
    }
    
    /* フォーカス状態の改善 */
    .nav-btn:focus{
      outline: 3px solid rgba(255, 182, 193, 0.5);
      outline-offset: 2px;
    }

    /* 読み込み状態の改善 */
    @media (prefers-reduced-motion: no-preference) {
      .slide{
        will-change: transform, opacity;
      }
    }
  </style>
</head>
<body>
  <div class="container" id="deck">
    <!-- 1: 表紙 -->
    <section class="slide slide-cover active" aria-label="表紙">
      <h1>千束町 歯のクリニック</h1>
      <div class="tagline">「笑顔とやさしさを広げる」</div>
      <p class="greeting">学生のみなさん、こんにちは！</p>
    </section>

    <!-- 2: 医院紹介 -->
    <section class="slide" aria-label="医院紹介">
      <h2>🏥 医院紹介</h2>
      <div class="content">
        <ul class="bullet-list">
          <li>土浦市千束町にある歯科クリニック</li>
          <li>アクセス良好（車・自転車・徒歩OK）</li>
          <li>患者さんもスタッフも <span class="highlight">自然な笑顔で安心できる雰囲気</span></li>
        </ul>
        <div class="info-box">
          地域に根ざした、通いやすい歯科クリニックです。明るく開放的な空間で、患者様に安心して治療を受けていただけます。
        </div>
      </div>
    </section>

    <!-- 3: 私たちの理念 -->
    <section class="slide" aria-label="私たちの理念">
      <h2>💖 私たちの理念</h2>
      <div class="content">
        <div class="special-box"><strong>「笑顔とやさしさを広げる」</strong></div>
        <ul class="bullet-list">
          <li>スタッフ・患者様・地域、関わるすべての方を大切に</li>
          <li>いつも自然な笑顔で対応しています</li>
          <li>一人ひとりの成長を応援し合える環境</li>
        </ul>
      </div>
    </section>

    <!-- 4: 魅力① 人間関係 -->
    <section class="slide" aria-label="魅力：人間関係">
      <h2>✨ 魅力① 人間関係</h2>
      <div class="content">
        <ul class="bullet-list">
          <li><span class="highlight">院長が優しい！</span></li>
          <li>怖い先輩・上司はいません</li>
          <li>スタッフみんな仲良し＆協力し合える雰囲気</li>
        </ul>
        <div class="info-box">
          アットホームで温かい職場。分からないことは何でも聞ける、風通しの良いチームです。
        </div>
      </div>
    </section>

    <!-- 5: 魅力② 環境 -->
    <section class="slide" aria-label="魅力：環境">
      <h2>🏢 魅力② 環境</h2>
      <div class="content">
        <ul class="bullet-list">
          <li>2020年4月オープンの <span class="highlight">新しく清潔でおしゃれな医院</span></li>
          <li>開放的な雰囲気で最新設備を導入</li>
          <li>石膏や注油も自動化 → 仕事がスムーズ</li>
        </ul>
        <div class="info-box">
          最新設備と快適な環境で効率的に働けます。清潔で明るい空間はスタッフにも患者様にも好評です。
        </div>
      </div>
    </section>

    <!-- 6: 魅力③ 制服 -->
    <section class="slide" aria-label="魅力：制服">
      <h2>👗 魅力③ 制服</h2>
      <div class="content">
        <ul class="bullet-list">
          <li><span class="highlight">ジェラートピケのスクラブ</span>（全5種類）</li>
          <li>季節ごとに着替えOK</li>
          <li>カーディガン・ヒートテックなども支給</li>
          <li>かわいくて働きやすい！</li>
        </ul>
        <div class="info-box">
          おしゃれで機能的なユニフォーム。季節に合わせて快適に働けます。
        </div>
      </div>
    </section>

    <!-- 7: 魅力④ 新人研修 -->
    <section class="slide" aria-label="魅力：新人研修">
      <h2>📚 魅力④ 新人研修</h2>
      <div class="content">
        <ul class="bullet-list">
          <li><span class="highlight">安心の研修システム</span></li>
          <li>先輩がマンツーマンで丁寧に指導</li>
          <li>メディア実績ある先生が来院、最前線の学びを得られます。</li>
        </ul>
        <div class="info-box">
          基礎から丁寧に。未経験でも安心してスタートできます。
        </div>
      </div>
    </section>

    <!-- 8: 魅力⑤ 患者層 -->
    <section class="slide" aria-label="魅力：患者層">
      <h2>👨‍👩‍👧‍👦 魅力⑤ 患者層</h2>
      <div class="content">
        <ul class="bullet-list">
          <li>小児からご高齢の方まで幅広い患者様</li>
          <li>一般から矯正・外科治療まで、トータルにサポート</li>
          <li><span class="highlight">衛生士業務をしっかり任せてもらえる環境</span></li>
        </ul>
        <div class="info-box">
          多様な症例を経験でき、専門性を高められます。
        </div>
      </div>
    </section>

    <!-- 9: 魅力⑥ 福利厚生 -->
    <section class="slide" aria-label="魅力：福利厚生">
      <h2>🎉 魅力⑥ 福利厚生</h2>
      <div class="content">
        <ul class="bullet-list">
          <li>スタッフ誕生日会・食事会・院内イベント</li>
          <li>年1回の周年記念イベント（旅行・ディナーなど）</li>
          <li><span class="highlight">仕事もプライベートも楽しく！</span></li>
        </ul>
        <div class="info-box">
          チームの絆を深めるイベントが充実。楽しい思い出もたくさん。
        </div>
      </div>
    </section>

    <!-- 10: 募集要項 -->
    <section class="slide" aria-label="募集要項">
      <h2>💼 募集要項</h2>
      <div class="content">
        <div class="feature-grid">
          <div class="feature-card"><h4>💰 給与</h4><p>基本給：17万円〜</p></div>
          <div class="feature-card"><h4>🚗 交通費</h4><p>支給（上限2万円）</p></div>
          <div class="feature-card"><h4>📈 昇給・賞与</h4><p>昇給あり／賞与年2回</p></div>
          <div class="feature-card"><h4>🏥 社会保険</h4><p>完備</p></div>
          <div class="feature-card"><h4>📅 休日</h4><p>週休2日制／有給あり</p></div>
          <div class="feature-card"><h4>⏰ 残業</h4><p><span class="highlight">ほぼゼロ！</span></p></div>
        </div>
      </div>
    </section>

    <!-- 11: 先輩の声 -->
    <section class="slide" aria-label="先輩の声">
      <h2>💬 先輩の声</h2>
      <div class="content">
        <div class="info-box"><span class="emoji">👩‍⚕️</span>「最初は不安でしたが、先輩がマンツーマンで支えてくれて安心でした」</div>
        <div class="info-box"><span class="emoji">👩‍⚕️</span>「研修制度がしっかりしていて、自信を持って患者さん対応できるようになりました」</div>
        <div class="info-box"><span class="emoji">👩‍⚕️</span>「スタッフみんな仲が良くて、毎日楽しく働いています」</div>
      </div>
    </section>

    <!-- 12: よくある質問 -->
    <section class="slide" aria-label="よくある質問">
      <h2>❓ よくある質問</h2>
      <div class="content">
        <div class="qa-item"><strong>Q: 残業は？</strong><br>A: ほぼなし！定時退勤が基本です。</div>
        <div class="qa-item"><strong>Q: 新人でも大丈夫？</strong><br>A: マンツーマン研修で安心してスタートできます。</div>
        <div class="qa-item"><strong>Q: セミナー参加は？</strong><br>A: 医院が費用をサポートします。</div>
        <div class="qa-item"><strong>Q: 産休・育休は？</strong><br>A: 実績あり、ママ社員も活躍中です。</div>
      </div>
    </section>

    <!-- 13: まとめ -->
    <section class="slide" aria-label="まとめ">
      <h2>🌟 まとめ</h2>
      <div class="content">
        <ul class="bullet-list">
          <li>仲間と協力し合える温かい雰囲気</li>
          <li>学びながら成長できる環境</li>
          <li>プライベートも大切にできる職場</li>
        </ul>
        <div class="special-box"><strong>一緒に「笑顔とやさしさ」を広げていきましょう！</strong></div>
      </div>
    </section>

    <!-- 14: エンディング -->
    <section class="slide" aria-label="お問い合わせ">
      <h2>📞 お問い合わせ</h2>
      <div class="content">
        <div class="contact-box">
          <h3>千束町 歯のクリニック</h3>
          <p><strong>TEL：029-875-5130</strong></p>
          <p style="margin-top: 10px;">見学も大歓迎！お気軽にお問い合わせください✨</p>
        </div>
        <p style="text-align:center;margin:10px 0;">ご清聴ありがとうございました</p>
      </div>
    </section>

    <!-- ナビゲーション -->
    <nav class="navigation" aria-label="スライドナビゲーション">
      <button class="nav-btn" id="prevBtn" type="button" aria-label="前のスライド">← 前へ</button>
      <div class="slide-counter" aria-live="polite">
        <span id="currentSlide">1</span> / <span id="totalSlides">14</span>
      </div>
      <button class="nav-btn" id="nextBtn" type="button" aria-label="次のスライド">次へ →</button>
    </nav>
  </div>

  <script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    const currentEl = document.getElementById('currentSlide');
    const totalEl = document.getElementById('totalSlides');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const deck = document.getElementById('deck');
    
    totalEl.textContent = totalSlides;

    // パフォーマンス最適化のための変数
    let isTransitioning = false;
    let rafId = null;

    function updateButtons(){
      prevBtn.disabled = currentSlide === 0;
      nextBtn.disabled = currentSlide === totalSlides - 1;
      currentEl.textContent = currentSlide + 1;
      
      // ARIA属性更新
      prevBtn.setAttribute('aria-disabled', currentSlide === 0);
      nextBtn.setAttribute('aria-disabled', currentSlide === totalSlides - 1);
    }

    function showSlide(n){
      if (isTransitioning) return;
      
      isTransitioning = true;
      const oldSlide = slides[currentSlide];
      
      currentSlide = Math.max(0, Math.min(n, totalSlides - 1));
      const newSlide = slides[currentSlide];
      
      // スライド切り替え
      oldSlide.classList.remove('active');
      newSlide.classList.add('active');
      
      // スクロール位置リセット
      if (newSlide.scrollTo) {
        newSlide.scrollTo({top: 0, behavior: 'instant'});
      } else {
        newSlide.scrollTop = 0;
      }
      
      updateButtons();
      
      // アニメーション完了後にフラグリセット
      setTimeout(() => {
        isTransitioning = false;
      }, 300);
    }

    function changeSlide(delta){ 
      if (!isTransitioning) {
        showSlide(currentSlide + delta); 
      }
    }

    // ボタンイベント
    prevBtn.addEventListener('click', (e) => {
      e.preventDefault();
      changeSlide(-1);
    });
    
    nextBtn.addEventListener('click', (e) => {
      e.preventDefault();
      changeSlide(1);
    });

    // キーボードナビゲーション
    document.addEventListener('keydown', (e) => {
      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
      
      switch(e.key) {
        case 'ArrowLeft':
        case 'ArrowUp':
          e.preventDefault();
          changeSlide(-1);
          break;
        case 'ArrowRight':
        case 'ArrowDown':
        case ' ':
          e.preventDefault();
          changeSlide(1);
          break;
        case 'Home':
          e.preventDefault();
          showSlide(0);
          break;
        case 'End':
          e.preventDefault();
          showSlide(totalSlides - 1);
          break;
      }
    });

    // スワイプ操作（改善版）
    let touchStartX = 0, touchStartY = 0;
    let touchEndX = 0, touchEndY = 0;
    let touchStartTime = 0;
    const SWIPE_THRESHOLD = 50;
    const SWIPE_VELOCITY_THRESHOLD = 0.3;

    deck.addEventListener('touchstart', (e) => {
      const touch = e.changedTouches[0];
      touchStartX = touch.clientX;
      touchStartY = touch.clientY;
      touchStartTime = Date.now();
    }, {passive: true});

    deck.addEventListener('touchend', (e) => {
      if (isTransitioning) return;
      
      const touch = e.changedTouches[0];
      touchEndX = touch.clientX;
      touchEndY = touch.clientY;
      
      const deltaX = touchEndX - touchStartX;
      const deltaY = touchEndY - touchStartY;
      const deltaTime = Date.now() - touchStartTime;
      const velocity = Math.abs(deltaX) / deltaTime;
      
      // 横方向のスワイプかチェック
      if (Math.abs(deltaX) > Math.abs(deltaY) && 
          (Math.abs(deltaX) > SWIPE_THRESHOLD || velocity > SWIPE_VELOCITY_THRESHOLD)) {
        
        e.preventDefault();
        
        if (deltaX > 0) {
          changeSlide(-1); // 右スワイプ：前へ
        } else {
          changeSlide(1);  // 左スワイプ：次へ
        }
      }
    }, {passive: false});

    // リサイズ対応
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        // 現在のスライドのスクロール位置をリセット
        const currentSlideEl = slides[currentSlide];
        if (currentSlideEl && currentSlideEl.scrollTo) {
          currentSlideEl.scrollTo({top: 0, behavior: 'instant'});
        }
      }, 150);
    });

    // 初期化
    slides[0].classList.add('active');
    updateButtons();

    // ページ読み込み時の最適化
    window.addEventListener('load', () => {
      // Safariでのバウンススクロール無効化
      document.body.style.overscrollBehavior = 'none';
      
      // iOS Safariでのビューポートの高さの問題を修正
      const setVH = () => {
        const vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
      };
      
      setVH();
      window.addEventListener('resize', setVH);
      window.addEventListener('orientationchange', () => {
        setTimeout(setVH, 100);
      });
    });

    // デバッグ用（開発時のみ）
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
      console.log('iPhone最適化版 - デバッグモード');
      console.log(`画面サイズ: ${window.innerWidth}x${window.innerHeight}`);
      console.log(`Safe area: top=${getComputedStyle(document.documentElement).getPropertyValue('--safe-top')}, bottom=${getComputedStyle(document.documentElement).getPropertyValue('--safe-bottom')}`);
    }
  </script>
</body>
</html>
